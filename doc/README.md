# 台北 BYOB 餐廳資料爬蟲專案

本專案目的為建立台北地區支援 BYOB（自帶酒水）餐廳的資料庫，包含地區、開瓶費、設備等資訊，供 App 與網站查詢功能使用。

---

## 📦 專案結構簡述

* `crawler/byob_scraper.py`: 主爬蟲程式，整合 Google Maps API、自動擷取餐廳資訊並判斷開瓶費與設備。
* `supplement/pixnet_scraper.py`: 補充爬蟲模組，利用 SerpAPI 對痞客邦 (Pixnet) 搜尋是否有餐廳提及 BYOB 相關描述。
* `data/seed_list_raw.txt`: 初始餐廳清單，每行格式為「餐廳名稱 # 資料來源」。
* `data/BYOB 台北餐廳資料庫.csv`: 最終資料輸出表，遵循 11 欄主欄位格式。
* `doc/`: 存放進度說明、任務提示與原始 README。

---

## ✅ 近期進度（2025-06-21）

### 🛠️ 功能實作

* Google Maps API 整合，查詢：

  * 地址（中文格式）
  * 電話
  * 官方網站連結
  * 類型分類（西式、酒吧、咖啡館）

* 自動解析：

  * 台北行政區自動擷取
  * 類型分類自動推論

* 擴充功能模組：

  * `detect_corkage_fee(text)`: 判斷是否收開瓶費，含金額擷取與中文/英文關鍵字比對
  * `detect_equipment(text)`: 擷取描述文字是否提及酒杯、開瓶器、冰桶等設備
  * 網站描述由 `extract_website_text()` 擷取文字摘要作為分析基礎

* 補充爬蟲模組：

  * `pixnet_scraper.py` 新增 SerpAPI 搜尋功能，支援搜尋 Pixnet 是否有提及特定餐廳與 BYOB 關鍵詞
  * 建立一餐廳多關鍵字輪詢與 snippet/title/link 含餐廳名比對機制，有效提高命中率
  * 回傳結果包含標題、連結、內文摘要，支援文章主體內容抓取（自動找出 HTML 結構）

* 結果輸出：

  * 顯示每間餐廳擷取結果（開瓶費、設備、備註）於 Terminal log
  * 自動寫入主 CSV，欄位包含「是否收開瓶費」、「提供酒器設備」、「備註說明」等

### 🧪 擷取狀態分析

* 多數餐廳因網站無明示或描述簡略，結果為「不確定」或「未知」
* Pixnet 補充搜尋命中率提升，成功抓取部分餐廳相關討論文章
* 仍需擴充語意比對與頁面結構兼容性處理

---

## 🚧 下一步建議任務（2025-06-22）

1. 強化 `pixnet_scraper.py`：支援自動跳頁（pagination）擷取更多搜尋結果
2. 優化摘要比對與判斷策略（如模糊比對餐廳名稱、關鍵詞語意拆解）
3. 串接主資料流程與補充資料比對，輸出合併清單供審查
4. 產出描述 log 並與主 CSV 搭配人工標註驗證
5. 實驗是否可透過 ChatGPT 協助自動判斷文章中是否提及「收費/不收費、自帶酒水/友善/限制類句型」

---

如需執行爬蟲，請確保 `.env` 檔已正確設定 `GOOGLE_MAPS_API_KEY`。SerpAPI 需設定 `SERPAPI_KEY`。程式將自動從 `seed_list_raw.txt` 擷取資料並寫入 `data/BYOB 台北餐廳資料庫.csv`。
